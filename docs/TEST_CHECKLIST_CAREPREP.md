# Patient CarePrep Testing Checklist

**Journey:** PT1-PT4 - Patient CarePrep Access & Completion
**Date:** November 27, 2024
**Status:** üîÑ In Progress

---

## üéØ Test Overview

Testing the patient experience of accessing and completing the pre-visit CarePrep questionnaire via token link.

**Key Insight:** Patients DON'T sign up - they access via unique token links generated by providers.

---

## üîë Step 0: Get a Test Token

Since we need a valid token to test, we have three options:

### Option A: Use Test Token (If Exists)
Check if there's a test token in the database:
```bash
# Connect to database and look for test tokens
# Or check if backend has seeded test data
```

### Option B: Generate Token via API
If provider API is working:
```bash
curl -X POST http://localhost:8000/api/appointments \
  -H "Content-Type: application/json" \
  -d '{
    "patient_name": "Test Patient",
    "patient_email": "test@example.com",
    "scheduled_start": "2024-12-01T10:00:00Z",
    "provider_name": "Dr. Test"
  }'
```

### Option C: Create Mock Token
For testing, we can use a base64 encoded appointment ID:
```javascript
// Example: appointment ID "123" encoded
const token = btoa("123"); // "MTIz"
```

**Token to Use for Testing:**
```
_____________________________________
(Write the token you'll use)
```

---

## ‚úÖ Test 1: Token Access - Invalid Token

**URL:** `http://localhost:3000/careprep/invalid-token-12345`

**Steps:**
1. [ ] Navigate to URL with invalid token
2. [ ] Observe page behavior

**Expected:**
- Loading spinner appears briefly
- Error card displays with:
  - Red alert icon
  - Title: "Unable to Load Appointment"
  - Message: "Invalid or expired CarePrep link"
  - Suggestion to contact provider
- No crash, graceful error handling

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

**Console Errors:**
```
(Check F12 console for errors)


```

---

## ‚úÖ Test 2: Token Access - Valid Token (If Available)

**URL:** `http://localhost:3000/careprep/[YOUR_TOKEN]`

**Steps:**
1. [ ] Navigate to URL with valid token
2. [ ] Wait for page to load

**Expected:**
- Loading spinner with "Loading your appointment details..."
- Then displays:
  - **Header:** "CarePrep" title
  - **Appointment Details Card:**
    - Patient name
    - Provider name
    - Date (formatted nicely)
    - Time range
    - Appointment type badge
    - Chief complaint (if any)
  - **Progress Card:**
    - Progress bar (0% if new)
    - "X of 2 tasks completed"
  - **CarePrep Checklist Card:**
    - ‚òê Update Medical History (Start button)
    - ‚òê Complete Symptom Checker (Start button)
  - **Info Card:** HIPAA compliance note

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________


[ ] ‚ö†Ô∏è BLOCKED - No valid token available
```

**API Calls Made (Network Tab):**
```
1. GET /api/appointments/careprep/[token]
   Status: ___________
   Response: ___________

2. GET /api/careprep/[appointment_id]/status
   Status: ___________
   Response: ___________
```

---

## ‚úÖ Test 3: Medical History Form

**Prerequisites:** Valid token, on CarePrep overview page

**Steps:**
1. [ ] Click "Start" button for "Update Medical History"
2. [ ] Observe form appears

**Expected:**
- View changes to medical history form
- "Back to Overview" button appears
- Form title: "Update Medical History"
- Medical history form component loads

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

**Form Fields Present:**
- [ ] Current Medications section
- [ ] Allergies section
- [ ] Medical Conditions section
- [ ] Submit/Save button

---

## ‚úÖ Test 4: Medical History - Fill & Save

**Steps:**
1. [ ] Fill out medical history form:
   - Add a medication (e.g., "Aspirin 81mg daily")
   - Add an allergy (e.g., "Penicillin - rash")
   - Check a medical condition (if checklist exists)
2. [ ] Click Save/Submit

**Expected:**
- Loading state on button
- API POST to `/api/careprep/[id]/medical-history`
- Success message or redirect
- Returns to overview page
- Medical History task shows as completed (‚úì)
- Progress bar updates to 50%

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

**API Call:**
```
POST /api/careprep/[id]/medical-history
Status: ___________
Request Body: ___________
Response: ___________
```

---

## ‚úÖ Test 5: Symptom Checker Form

**Steps:**
1. [ ] From overview, click "Start" for "Complete Symptom Checker"
2. [ ] Observe form appears

**Expected:**
- View changes to symptom checker form
- "Back to Overview" button appears
- Form title: "Complete Symptom Checker"
- Symptom checker form component loads

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

**Form Fields:**
- [ ] Symptom description field
- [ ] Severity selector
- [ ] Duration field
- [ ] Additional symptom fields
- [ ] Submit button

---

## ‚úÖ Test 6: Symptom Checker - Fill & Save

**Steps:**
1. [ ] Fill out symptom form:
   - Symptom: "Headache"
   - Severity: "Moderate"
   - Duration: "3 days"
   - Details: "Worsens in afternoon"
2. [ ] Click Save/Submit

**Expected:**
- Loading state
- API POST to `/api/careprep/[id]/symptom-checker`
- Returns to overview
- Symptom Checker task shows as completed (‚úì)
- Progress bar updates to 100%
- "All tasks completed!" message appears

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

**API Call:**
```
POST /api/careprep/[id]/symptom-checker
Status: ___________
Response: ___________
```

---

## ‚úÖ Test 7: Edit Completed Tasks

**Steps:**
1. [ ] After both tasks completed, click "Edit" on Medical History
2. [ ] Observe form appears with previously saved data

**Expected:**
- Form opens with saved data pre-populated
- Can modify existing entries
- Can add new entries
- Save updates the data
- Returns to overview

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

---

## ‚úÖ Test 8: Progress Persistence

**Steps:**
1. [ ] Complete Medical History (50%)
2. [ ] Close browser tab
3. [ ] Reopen same CarePrep link
4. [ ] Check if progress is saved

**Expected:**
- Medical History still shows as completed
- Symptom Checker still pending
- Progress bar shows 50%

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

---

## ‚úÖ Test 9: Responsive Design

**Steps:**
1. [ ] Open CarePrep page on desktop (current)
2. [ ] Resize browser to mobile width (375px)
3. [ ] Test all interactions

**Expected:**
- Layout adapts to mobile
- Cards stack vertically
- Buttons remain accessible
- Text is readable
- No horizontal scroll

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

---

## ‚úÖ Test 10: Back Button Navigation

**Steps:**
1. [ ] Click "Start" on any task
2. [ ] Click "Back to Overview" button

**Expected:**
- Returns to overview page
- No data loss
- Progress indicators accurate

**Actual Result:**
```
[ ] ‚úÖ PASS
[ ] ‚ùå FAIL - Describe:
_____________________________________________
```

---

## üêõ Bugs Found

### Bug #1
**Title:** ________________________________
**Severity:** [ ] Critical [ ] High [ ] Medium [ ] Low
**Description:**
```


```
**Steps to Reproduce:**
1.
2.
3.

---

### Bug #2
**Title:** ________________________________
**Severity:** [ ] Critical [ ] High [ ] Medium [ ] Low
**Description:**
```


```

---

## üìä Summary

**Tests Completed:** ___ / 10
**Tests Passed:** ___
**Tests Failed:** ___
**Tests Blocked:** ___ (no valid token)

**Overall Assessment:**
- [ ] ‚úÖ Ready for patients
- [ ] ‚ö†Ô∏è Minor issues, functional
- [ ] ‚ùå Major issues, needs fixes
- [ ] üö´ Blocked, cannot test

---

## üîç Key Findings

### What Works Well:
```
-
-
-
```

### What Needs Improvement:
```
-
-
-
```

### Critical Issues:
```
-
-
-
```

---

## üéØ Next Steps

Based on test results:

1. [ ] Document all bugs in TEST_FINDINGS document
2. [ ] Test with real backend API (if available)
3. [ ] Test symptom checker AI analysis (if implemented)
4. [ ] Test medical history form validation
5. [ ] Create test data/tokens for easier testing

---

## üí° Test Data Needed

To properly test this journey, we need:

**In Backend:**
- [ ] Test appointment records
- [ ] Valid CarePrep tokens
- [ ] API endpoints working:
  - GET `/api/appointments/careprep/[token]`
  - GET `/api/careprep/[id]/status`
  - POST `/api/careprep/[id]/medical-history`
  - POST `/api/careprep/[id]/symptom-checker`

**Testing Scenarios:**
- [ ] New patient (no previous data)
- [ ] Returning patient (has history)
- [ ] Expired token
- [ ] Already completed CarePrep

---

**Tester:** _____________________
**Date:** _____________________
**Ready for Next Journey:** [ ] Yes [ ] No
